<!doctype html>

<html>
	<head>
		<meta charset='utf-8'>
		<meta name='viewport' content='width=500px'>
		<title> FpBird </title>
	</head>
					
	<body> 
		<canvas id='mega'></canvas> 
		<script type='text/javascript' src='fpbird.js'></script>
		<script>
			/* initialize */
			document.getElementById("mega").width = "500px";
			document.getElementById("mega").height = "700px";
			document.getElementById("mega").style.position = "absolute";
			document.getElementById("mega").style.top = "0";
			document.getElementById("mega").style.left = "0";
			document.getElementById("mega").style.width = "500px";
			document.getElementById("mega").style.height = "700px";
			document.getElementById("mega").style.borderStyle = "dotted";

			/*objects */

			var Player = function () {
				this.force = undefined;
				this.velocity = undefined;
				this.position = {x:undefined, y:undefined};
			}

			Player.prototype.Update = function (game_status, istouched) {
				var pnow = this.position;
				var F = ()?():();
				var V = F * ( 1000 / 30 ); 
				var pnext = {x: pnow.x, y: pnow.y + (V * (1000 / 30))};
				this.position = pnext; /* Iteration */
			}

			var Render = function () {
			}

			Render.prototype.dot = function (r, x, y, color) {
			}

			Render.prototype.text = function (text) {
			}

			Render.prototype.Exec = function () {
			}

			var Eventer = function () {
				this.istouched = false;
			}

			Eventer.prototype.Bind = function () {
				/* Bind touch events */
				var Me = this;
				document.getElementById("mega").addEventListener("touchstart", function(e){
					e.preventDefault();
					Me.istouched = true;
				}, false);
				document.getElementById("mega").addEventListener("touchend", function(e){
					e.preventDefault();
					Me.istouched = false;
				}, false);
				/* Bind keyboard events */
				document.addEventListener("keydown", function(e){
					e.preventDefault();
					e = e || windows.event;
					e = e.keyCode || e.which;
					if (e === 32) {
						Me.istouched = true;
					}
				}, false);
				document.addEventListener("keyup", function(e){
					e.preventDefault();
					e = e || windows.event;
					e = e.keyCode || e.which;
					if (e === 32) {
						Me.istouched = false;
					}
				}, false);
			}

			Eventer.prototype.Touched = function () {
				return this.istouched;
			}

			var Game = function (eventer_obj, player_obj) {
				var Me = this;
				this.player = player_obj;
				this.eventer = eventer_obj; 
				this.timerid = setInterval(function(){Me.loop()}, /*frame_rate->*/30);
				this.eventer.Bind();
			};


			Game.prototype.loop = function () {
				document.title = this.eventer.Touched();
			}

			new Game(new Eventer());

		</script>
	</body>
</html>


